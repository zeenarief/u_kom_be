paths:
  # === /employees ===
  /employees:
    get:
      tags: [Employee]
      summary: "Get All Employees (List)"
      description: "Mengambil daftar semua pegawai (ringkas). Memerlukan permission 'employees.read'."
      parameters:
        - $ref: '../components/parameters.yaml#/parameters/SearchQuery'
      responses:
        '200':
          description: "Daftar pegawai berhasil diambil."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmployeeList'
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '500': { $ref: '../components/responses.yaml#/InternalError' }

    post:
      tags: [Employee]
      summary: "Create New Employee"
      description: "Membuat data pegawai baru. Memerlukan permission 'employees.create'."
      requestBody:
        description: "Data pegawai baru"
        required: true
        content:
          application/json:
            schema:
              $ref: '../components/schemas/employee.yaml#/schemas/EmployeeCreateRequest'
      responses:
        '201':
          description: "Pegawai berhasil dibuat. Mengembalikan data detail."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmployeeDetail'
        '400': { $ref: '../components/responses.yaml#/BadRequest' }
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '500': { $ref: '../components/responses.yaml#/InternalError' }

  # === /employees/{id} ===
  /employees/{id}:
    parameters:
      - $ref: '../components/parameters.yaml#/parameters/EmployeeId'

    get:
      tags: [Employee]
      summary: "Get Employee by ID (Detail)"
      description: "Mengambil data detail lengkap seorang pegawai. Memerlukan permission 'employees.read'."
      responses:
        '200':
          description: "Data detail pegawai berhasil diambil."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmployeeDetail'
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '404': { $ref: '../components/responses.yaml#/NotFound' }
        '500': { $ref: '../components/responses.yaml#/InternalError' }

    put:
      tags: [Employee]
      summary: "Update Employee"
      description: "Memperbarui data pegawai. Memerlukan permission 'employees.update'."
      requestBody:
        description: "Data pegawai yang ingin diupdate"
        required: true
        content:
          application/json:
            schema:
              $ref: '../components/schemas/employee.yaml#/schemas/EmployeeUpdateRequest'
      responses:
        '200':
          description: "Pegawai berhasil diupdate. Mengembalikan data detail terbaru."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmployeeDetail'
        '400': { $ref: '../components/responses.yaml#/BadRequest' }
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '404': { $ref: '../components/responses.yaml#/NotFound' }
        '500': { $ref: '../components/responses.yaml#/InternalError' }

    delete:
      tags: [Employee]
      summary: "Delete Employee"
      description: "Menghapus data pegawai. Memerlukan permission 'employees.delete'."
      responses:
        '200':
          description: "Pegawai berhasil dihapus."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmpty'
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '404': { $ref: '../components/responses.yaml#/NotFound' }
        '500': { $ref: '../components/responses.yaml#/InternalError' }

  # === /employees/{id}/link-user ===
  /employees/{id}/link-user:
    parameters:
      - $ref: '../components/parameters.yaml#/parameters/EmployeeId'
    post:
      tags: [Employee]
      summary: "Link Employee to User Account"
      description: "Menautkan profil pegawai ke akun user. Memerlukan permission 'employees.manage_account'."
      requestBody:
        description: "ID User yang akan ditautkan"
        required: true
        content:
          application/json:
            schema:
              $ref: '../components/schemas/common.yaml#/schemas/LinkUserRequest'
      responses:
        '200':
          description: "Pegawai berhasil ditautkan."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmpty'
        '400': { $ref: '../components/responses.yaml#/BadRequest' }
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '404': { $ref: '../components/responses.yaml#/NotFound' }

  # === /employees/{id}/unlink-user ===
  /employees/{id}/unlink-user:
    parameters:
      - $ref: '../components/parameters.yaml#/parameters/EmployeeId'
    delete:
      tags: [Employee]
      summary: "Unlink Employee from User Account"
      description: "Menghapus tautan pegawai dari akun user (set 'user_id' ke NULL). Memerlukan permission 'employees.manage_account'."
      responses:
        '200':
          description: "Tautan pegawai berhasil dihapus."
          content:
            application/json:
              schema:
                $ref: '../components/schemas/common.yaml#/schemas/SuccessResponseEmpty'
        '401': { $ref: '../components/responses.yaml#/Unauthorized' }
        '403': { $ref: '../components/responses.yaml#/Forbidden' }
        '404': { $ref: '../components/responses.yaml#/NotFound' }
